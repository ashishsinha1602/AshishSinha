<div class="admin-wrap">
    <div class="container-fluid">
    <div class="row">
        <div class="col-md-12">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="#">Home</a></li>
                    <li class="breadcrumb-item active" aria-current="page">Search Results</li>
                </ol>
            </nav>
        </div>
        <div class="col-md-12 text-center">
            <div class="search-box-wrap">
                <form [formGroup]="search_form" (ngSubmit)="SearchFunction()">
                    <div class="form-row">
                        <div class="col-md-3">
                            <div class="form-group m-0">
                                <label class="label">Select State</label>
                                <select name="" id="" formControlName="state" aria-placeholder="State"
                                    class="form-control" (change)="BasedOntheState(state)" [(ngModel)]="state"
                                    name="state">
                                    <option value="" disabled>State</option>
                                    <option *ngFor="let st of state_array">{{st.state}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group m-0">
                                <label class="label">Select City</label>
                                <select name="" id="" class="form-control" aria-placeholder="City" [(ngModel)]="city"
                                    name="city" formControlName="city">
                                    <option value="" disabled>City</option>
                                    <option *ngFor="let ct of city_array">{{ct}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-md-2">
                            <div class="form-group m-0">
                                <label class="label">Enter Keyword</label>
                                <input type="text" class="form-control" placeholder="" formControlName="pincode"
                                    name="pincode">
                            </div>
                        </div>
                        <div class="col-md-5">
                            <div class="form-group m-0">
                                <label class="label">Select Profile</label>
                            </div>
                            <div class="d-flex">
                                <div class="form-check form-check-inline pl-2">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio1" value="teacher" formControlName="role" name="role">
                                    <label class="form-check-label" for="inlineRadio1">Teacher</label>
                                </div>
                                <div class="form-check form-check-inline pl-2">
                                    <input class="form-check-input" type="radio" name="inlineRadioOptions"
                                        id="inlineRadio2" value="counsellor" formControlName="role" name="role">
                                    <label class="form-check-label" for="inlineRadio2">Counsellor</label>
                                </div>
                                <button type="submit" class="btn btn-primary btn-block"
                                    [disabled]="!search_form.valid">Search</button>

                            </div>
                            <div style="text-align:end" *ngIf="record_error_msg != ''">
                                <mat-error>
                                    <span style="color: red;">{{record_error_msg}}</span>
                                </mat-error>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
        <div class="col-md-12">
            <div class="course-list">
                <div class="col-md-12 text-center mb-3">
                    <h4 *ngIf="counsellor_array.length > 0">Search Result for {{profession}}</h4>
                </div>
                <ul>
                    <li *ngFor="let row of counsellor_array | paginate: { itemsPerPage: 9, currentPage: p }">
                        <a>
                            <div class="course-box">
                                <div class="course-img">
                                    <!-- <img src="assets/images/counseling1.jpg" alt=""> -->
                                    <img src="{{image_path}}{{row.profile_img}}" alt="">
                                </div>
                                <div class="course-content">
                                    <h5 class="course-name">{{row.username}}</h5>
                                    <div class="rating">
                                        <!-- <img s rc="assets/images/rating-4.png" alt="" width="87" height="15">
                                        <h6 class="rating-total">4.6 (1234)</h6> -->
                                    </div>
                                    <h5 class="course-level">{{row.email}}</h5>
                                    <h5 class="course-level">{{row.phone}}</h5>
                         

                                    <div [ngSwitch]="profession">
                                        <ng-container *ngSwitchCase="'Teacher'">
                                            <i class="fa fa-user cursor" aria-hidden="true" (click)=Teacher_Details(row)
                                            data-toggle="modal" data-target="#modal-default"></i>

                                            <i class="fa fa-book-open mx-4 cursor" aria-hidden="true" 
                                            (click)=GetCourseBasedOnTeacher(row)></i>
                                        </ng-container>
                                        <ng-container *ngSwitchCase="'Counsellor'">
                                            <i class="fa fa-user cursor" aria-hidden="true" (click)=Counsellor_Details(row)
                                            data-toggle="modal" data-target="#modal-default"></i>

                                            <i class="fa fa-book-open mx-4 cursor" aria-hidden="true" 
                                            (click)=GetSessionBasedOnCounsellor(row)></i>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </li>
                    <!-- <li>
                        <a routerLink="/counselor-profile">
                            <div class="course-box">
                                <div class="course-img">
                                    <img src="assets/images/counseling1.jpg" alt="">
                                </div>
                                <div class="course-content">
                                    <h5 class="course-name">Counseling Sessions 1</h5>
                                    <div class="rating">
                                        <img src="assets/images/rating-4.png" alt="" width="87" height="15">
                                        <h6 class="rating-total">4.6 (1234)</h6>
                                    </div>
                                    <h5 class="course-level">Lorem ipsum dolor sit amet, consectetur adipiscing elit,
                                        sed do eiusmod</h5>
                                    <h2 class="course-price">â‚¹455</h2>
                                </div>
                            </div>
                        </a>
                    </li>  -->
                </ul>
            </div>
            <pagination-controls (pageChange)="p = $event" class="float-right"
            *ngIf="counsellor_array.length > 0"></pagination-controls>
        </div>
    </div>
</div>
</div>
<ngx-spinner></ngx-spinner>

<div class="modal fade" id="modal-default">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"> <b>Teacher Details.</b>
                </h4>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="card card-primary card-outline">
                    <div class="card-body box-profile" *ngFor="let row of teacher_details; let i = index">
                        <div class="text-center">
                            <img src="assets/images/avatar.jpg" alt="" *ngIf="row.profile_img == ''"
                                style="width: 200px;">
                            <img src="{{row.profile_image}}" alt="" *ngIf="row.profile_img != ''"
                                style="width: 40%; height: 120px;">
                        </div>
                        <h3 class="profile-username text-center">{{row.username}}</h3>
                        <ul class="list-group list-group-unbordered mb-3">
                            <li class="list-group-item">
                                <b>Email</b> <a class="float-right">{{row.email}}</a>
                            </li>
                            <li class="list-group-item">
                                <b>Phone</b> <a class="float-right">{{row.phone}}</a>
                            </li>
                            <li class="list-group-item">
                                <b>Address</b> <a class="float-right"
                                    *ngIf="row.address != null && row.address != '' ">{{row.address}},
                                    {{row.city}},{{row.state}},{{row.zip_code}}
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Certificate</b>
                                <a *ngIf="row.certificate != null && row.certificate != ''" class="float-right"
                                    target="_blank" href="{{row.certificate_img}}">
                                    <i class="fa fa-file-pdf-o fa-2x"></i>
                                </a>
                            </li>
                            <!-- <li class="list-group-item">
                                <b>Id Proof</b>
                                <a *ngIf="row.id_proof != null && row.id_proof != ''" class="float-right"
                                    target="_blank" href="{{row.id_proof_img}}">
                                    <i class="fa fa-file-pdf-o fa-2x"></i>
                                </a>
                            </li>
                            <li class="list-group-item">
                                <b>Resume</b>
                                <a *ngIf="row.tch_resume != null && row.tch_resume != ''" class="float-right"
                                    target="_blank" href="{{row.tch_resume_img}}">
                                    <i class="fa fa-file-pdf-o fa-2x"></i>
                                </a>
                            </li> -->
                            <li class="list-group-item">
                                <b>Education Details</b>
                                <div class="row" *ngIf="row.edu_qualification != null && row.edu_qualification != ''">
                                    <div class="col-12 p-1" *ngFor="let r1 of row.edu_qualification, let M = index">
                                        {{r1.school_name}} ({{r1.duration_from}} - {{r1.duration_to}})
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <b>Competency Area </b>
                                <div class="row" *ngIf="row.competency_area != null && row.competency_area != ''">
                                    <div class="col-6 p-1" *ngFor="let r1 of row.competency_area, let M = index">
                                        {{r1}}
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <b>Teaching Experience </b>
                                <div class="row" *ngIf="row.tch_information != null && row.tch_information != ''">
                                    <div class="col-12 p-1" *ngFor="let r1 of row.tch_information, let M = index">
                                        {{r1.college_name}} ({{r1.experience}}) ({{r1.duration_from}} - {{r1.duration_to}})
                                    </div>
                                </div>
                            </li>
                            <li class="list-group-item">
                                <b>Created_at</b> <a class="float-right">{{row.created_at | date:'d MMM y'}}</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="modal-footer justify-content-between">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>